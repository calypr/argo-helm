# Example: User-Provided Repository Configuration
#
# This file demonstrates how to provide your own repository configuration
# when deploying the Argo Stack chart.
#
# Usage:
#   helm upgrade --install argo-stack ./helm/argo-stack \
#     --namespace argocd --create-namespace \
#     --values examples/user-repos-example.yaml \
#     --wait

# ============================================================================
# User Applications Configuration
# ============================================================================
# Replace these with your actual repository URLs and settings

applications:
  # Example 1: Basic application with global S3 storage
  - name: my-workflow-app
    project: default
    repoURL: https://github.com/YOUR_ORG/YOUR_REPO.git  # ⚠️  REQUIRED: Replace with your repo
    targetRevision: main
    path: "."
    destination:
      namespace: wf-poc
    syncPolicy:
      automated:
        prune: true
        selfHeal: true

  # Example 2: Application with dedicated S3 bucket (recommended)
  - name: my-other-app
    project: default
    repoURL: https://github.com/YOUR_ORG/ANOTHER_REPO.git  # ⚠️  REQUIRED: Replace with your repo
    targetRevision: main
    path: "."
    destination:
      namespace: wf-poc
    syncPolicy:
      automated:
        prune: true
        selfHeal: true
    # Per-repository artifact storage
    artifacts:
      bucket: my-app-artifacts
      keyPrefix: workflows/
      endpoint: https://s3.us-west-2.amazonaws.com
      region: us-west-2
      # Create this secret before deployment:
      # kubectl create secret generic my-app-s3-creds -n wf-poc \
      #   --from-literal=accessKey=YOUR_ACCESS_KEY \
      #   --from-literal=secretKey=YOUR_SECRET_KEY
      credentialsSecret: my-app-s3-creds

# ============================================================================
# GitHub Events (Optional)
# ============================================================================
# If using Argo Events for GitHub webhooks, configure your repositories here

events:
  enabled: true
  github:
    enabled: true
    repositories:
      - eventName: my_app_push
        owner: YOUR_ORG              # ⚠️  REQUIRED: Your GitHub org/user
        repository: your-repo-name    # ⚠️  REQUIRED: Your repo name
        events: ["push"]
        active: true
      - eventName: another_app_push
        owner: YOUR_ORG              # ⚠️  REQUIRED: Your GitHub org/user
        repository: another-repo      # ⚠️  REQUIRED: Your repo name
        events: ["push"]
        active: true
    secret:
      # Provide GitHub PAT at deployment time:
      # export GITHUB_PAT=github_pat_XXXXXXXX
      # helm upgrade --install ... --set-string events.github.secret.tokenValue=$GITHUB_PAT
      create: true
      name: github-secret
      tokenKey: token

# ============================================================================
# Notes
# ============================================================================
# 
# 1. Never commit real credentials or private repo URLs to version control
# 2. Use environment variables or secret management tools for sensitive data
# 3. See examples/per-repo-artifacts-values.yaml for more advanced examples
# 4. See local-dev-values.yaml for local development with MinIO
